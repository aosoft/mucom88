------------------------------------------------------------------------------
MUCOM88 Windows document (Japanese Shift_JIS text)

OpenMucom88 Ver.1.7a Copyright 1987-2019(C) Yuzo Koshiro
Z80 emulation by Yasuo Kuwahara 2002-2018(C)
FM Sound Generator by cisc 1998, 2003(C)
Windows version by ONION software/onitama 2018-2019(C)
------------------------------------------------------------------------------

・はじめに

	MUCOM88 Windowsは、NECのパソコンPC-8801シリーズで動作していた、
	古代祐三氏によるFM音源のツール/ドライバーである、MUCOM88を
	Windows上で動作させるためのシステムです。
	コマンドライン版、GUI版の両方が用意されています。

		mucom88win.exe         Windows GUI版エディタ
		FmToneEditor.exe       Windows GUI版音色エディタ
		mucom88DatToTxt.exe    Windows GUI版音色変換ツール
		mucom88.exe            Windows コマンドライン版

	MUCOM88 Windowsを使用することにより、音楽記述に特化した言語
	MML(Music Macro Language)として記述された音楽を、
	PC-8801の音源と同様に演奏させることができます。
	また、SCCI(Sound Chip Common Interface)を経由することで
	実際のFM音源チップ(YM2608)による演奏をサポートしています。

	MUCOM88 Windowsの最新情報及び、ファイルのダウンロードは
	以下のサイトにて行っています。

	MUCOM88 Windows
	https://onitama.tv/mucom88/

	オリジナルのPC-8801版MUCOM88も、株式会社エインシャント様のサイトで
	ディスクイメージが公開されています。

	OPEN MUCOM88 for PC-8801
	https://www.ancient.co.jp/~mucom88/


・動作環境

	MUCOM88 Windowsは、サウンド再生が可能なWindows XP以降のシステム上で
	動作します。
	Windowsのサウンド再生処理には、DirectX8以降のDirectSoundを
	使用しています。Windows XP以降の環境では、追加のコンポーネントを
	用意することなく動作させることができます。

	FM音源、PSGサウンドのエミュレーションは32bit/55KHzで合成し、
	出力されています。古いマシンでは、負荷が大きい場合があります。

	MUCOM88 Windowsは、オリジナルのMUCOM88で使用されていたコード(Z80)を
	仮想的にエミュレーションし、FM音源ジェネレーター(fmgen)を介して
	演奏します。オリジナルと同様の動作で、MMLの解釈、演奏をさせることが
	可能になっています。
	動作に際して、PC-8801のBIOSやROM、ディスクイメージは必要ありません。

	アプリケーションの更新履歴については、同梱されている「history.txt」を
	参照してください。


・ファイル形式の概要

	MUCOM88 Windowsで扱うことのできるフォーマットは、以下の通りです。

	・.MUC形式      PC-8801上で動作するMUCOM88(MUSIC LALF)の書式で
	                記述されたMML(行番号を除く)SJIS形式のテキストファイル
	                として保存したもの。
	                FM音源(YM2608)6声、ADPCM1声とリズム音源6声、PSG3声の
			コントロールが可能です。
	                MMLの詳細はMUCOM88のマニュアルを参照下さい。

	・.MUB形式      MUC形式をバイナリに変換したファイル形式。
	                演奏データ及びFM音色、ADPCMデータを内包します。

	・.dat形式      FM音源のプリセット音色を保存しているファイルです。
	                voice.datファイルを標準的なプリセット音色として
	                使用します。これは、PC-8801版のMUCOM88(MUSIC LALF)
	                で使用されていたファイルと互換性があります。

	・.bin形式      ADPCM音源波形データを保存しているファイルです。
			mucompcm.binファイルを標準で使用します。
			PC-8801版のMUCOM88(MUSIC LALF)で使用されていた
			データを変換して使用することが可能です。


・使い方の概要

	Windows GUIベースでMMLの編集と演奏が可能です。
	「mucom88win.exe」を起動すると、エディタの画面となりMMLの編集が
	できるようになります。基本的な操作は、以下のキーかボタンで行います。

		メニュースクリーン呼び出し ([F1]キー)
		編集中のMMLを保存 ([ctrl]+[S]キー)
		編集中のMMLを演奏 ([F5]または[F12]キー)
		演奏の停止 ([ESC]キー)
		演奏の早送り([ctrl]+[F1]キー)
		音色エディタの起動(V.EDITボタン)

	MMLの編集画面では、

	A t190@30v15 cdefgab>c

	など「チャンネル(A〜K)」「スペース」「MML記述」という組み合わせで
	各行に書いたものが、そのまま演奏されます。

	基本的には、自由にMMLを記述し[F5]で演奏(MMLコンパイル)させながら
	曲を作成するスタイルになります。画面下にある数行のウインドウに、
	MMLコンパイルの結果やメッセージが表示されます。
	MMLの記述にエラーがあった場合も、そこに表示されます。

	MMLは、テキストファイルとして読み込み・保存ができるので
	気軽な気持ちで読み書きが可能です。

	MML記述についての詳細は、付属のテキスト「MUCOM88_REF.txt」を
	参考にしてください。また、サンプルMML(sampl1〜sampl3)も、実際の
	作成に役立つはずです。

	MML編集以外の操作は、[F1]キーで呼び出されるメニュースクリーンから
	行います。


・オートプレイヤー

	オートプレイヤーにより、複数の楽曲を自動的に演奏させることが可能です。
	メニュースクリーンの[Home]->[プレイヤー...]ボタンを押すと、
	その時点で選択されていたファイルリストの曲を順番に演奏します。
	オートプレイヤーは、2分間経過するか、または1.5ループ曲を再生すると
	次の曲に移行します。

		[ESC]     アプリケーション終了
		[Enter]   曲の更新

	※SCCIモード動作時は、MUCOM88 Windowsとの同時起動ができません。
	  MUCOM88 Windowsを終了させた上で、オートプレイヤーのみを
	　実行してください(aplayer.exe)


・メニュースクリーン

	[F1]キーで切り替わるメニュースクリーンでは、画面左に並んだボタンにより
	機能を選ぶことができます。
	それぞれのメニュー詳細は、以下の通りです。

	■<<

	メニュースクリーンを終了して、MML編集画面に戻ります。
	[F1]キーでも戻ります。

	■Home

	メニュースクリーンで最初に表示されるホーム画面になります。
	ファイルブラウザにより、MUCファイルを選択することができます。
	カーソルキーでファイルを選択、[Enter]キーで編集画面に読み込みます。
	「フォルダを参照」ボタンにより別なフォルダを参照することができます。
	また、ファイルブラウザ上から直接MUCファイルを再生したり、バイナリ
	データ(MUBファイル)を作成することができます。
	「プレイヤー」ボタンによりオートプレイヤーが起動します。

	■Load

	ファイルダイアログからMUCファイルを選択して、編集します。

	■Save

	編集中のMMLをMUCファイルに上書き保存します。

	■Save as...

	編集中のMMLに新しい名前を付けてMUCファイルに保存します。

	■New

	編集中の内容を消去して、新規のMMLファイル編集を開始します。

	■About

	MUCOM88 Windowsのバージョン情報を表示します。

	■Web

	MUCOM88 Windowsのwebページを開きます。

	■Share

	編集中のMMLをSNS等で共有します。
	(この機能は現在開発中のため使用できません。)

	■Tool

	MMLやデータに関するツールを実行します。

	編集中のMMLを整形します

		PC-8801のファイルを変換する際に使用します

	PCMデータファイルを作成します

		PC-8801のファイルを変換したり、wav形式の
		波形を使ってPCMデータファイルを作成します。
		詳しくは、「ADPCMデータファイルについて」の項目を
		参照してください。

	編集中のMMLをN88エクスポート

		編集中のMMLに行番号を付加して、再びPC-8801に
		持って行くことのできるファイルを生成します。


	■Option

	MUCOM88 Windowsの設定を変更します。

	ユーザー名          : タグ設定時に使用される既定のユーザー名
	標準音色ファイル    : タグ設定時に使用される既定の音色ファイル
	標準ADPCMファイル   : タグ設定時に使用される既定のADPCMファイル

	ウインドウサイズ    : アプリケーションのウインドウサイズを設定します
	フォント設定        : フォントを変更します
	文字色の変更        : エディタ文字色をダイアログで設定します
	背景色の変更        : エディタ背景色をダイアログで設定します

	早送り再生速度      : 早送り(ctrl+F1)時の速度を変更します

	SCCIを使用          : SCCIによる実チップ演奏を有効にします
	                      (この設定変更はツール再起動後に有効になります)
	SCCI設定            : SCCI設定ツール(scciconfig.exe)を起動します


・一時ファイルについて

	mucom88win.exeでは、MML演奏(コンパイル)時に一時ファイルを
	MUCファイルがあるフォルダと同じ場所に作成します。

		mucommml      編集中のMMLを出力した一時ファイル
		mucombin      編集中のMMLをバイナリ出力した一時ファイル

	これらの一時ファイルは、通常時は必要ありませんので
	削除しても問題ありません。もし、エディタがエラーなどで強制終了
	されて、ファイルの編集ができなかった際には、最後に演奏した
	データをmucommmlから復元することができます。

	また、エディタの設定は、以下のフォルダに保存されています。

	/User/ユーザー名/AppData/Roaming/MUCOM88/mucom88win.ini

	アンインストール時や、設定を初期化する際は、該当フォルダを
	削除してください。


・音色データファイルについて

	MUCOM88 Windowsには、音色データファイルとして、「voice.dat」が
	付属しています。「voice.dat」では、PC-8801版のMUCOM88と同様の
	FM音色を指定することができます。

	PC-8801で使用していたFM音色ファイルをWindows上に持ってくることで
	「voice.dat」以外の音色を使用することが可能です。

	標準的に使用されるFM音色ファイルは、mucom88winのメニュー(F1)から
	オプション(Option)->「標準音色ファイル」で指定されている項目を
	修正することで変更が可能です。

	また、MMLの中に、タグとして「#voice」で始まる行を追加することで、
	明示的にFM音色ファイルを指定することができます。

		#voice voice.dat

	上の例では、MMLが「voice.dat」のFM音色データファイルを使用することを
	示しています。これにより、演奏時に自動的に該当するFM音色データが
	読み込まれます。

	ユーザーが独自に作成したFM音色データファイルは、MMLデータファイルと
	同じフォルダに配置するようにしてください。


・音色エディタについて

	音色データファイルやFM音源のパラメーターを確認しながら音色を
	編集することができる、音色エディタが付属されています。
	MML編集画面の「V.EDIT」ボタンを押すことで、音色エディタが起動します。
	音色エディタのウインドウに、voice.datなどの音色データファイルを
	ドラッグ&ドロップすることで、ファイルに保存された音色を確認する
	ことができます。
	また、編集した音色は、クリップボードを経由して、MUCOM88のエディタに
	持ってくることができます。

	音色エディタでctrl+Cによりクリップボードにコピーした後、
	MUCOM88 WindowsのMMLエディタ画面で、ctrl+Vを押してペーストすると
	以下のような音色定義テキストが貼り付けられます。

	  @0:{
	   7,  0
	  31, 18,  0,  6,  2, 36,  0, 10,  3
	  31, 14,  4,  6,  2, 45,  0,  0,  3
	  31, 10,  4,  6,  2, 18,  1,  0,  3
	  31, 10,  3,  6,  2,  0,  1,  0,  3,""}

	音色エディタの詳しい使用方法は、ドキュメント「FmToneEditoe.txt」を
	お読みください。


・ADPCMデータファイルについて

	MUCOM88 Windowsでは、ADPCM音源用のサンプリングデータを、
	標準で「mucompcm.bin」というファイルに集約して管理しています。
	「mucompcm.bin」には、標準的なADPCMのサンプルが含まれています。

	        No. サウンド
	    -----------------------------------------------
		@0  kick(バスドラム)
		@1  snare(スネアドラム)
		@2  kick+snare(バス+スネアドラム)
		@3  crashcymbal(クラッシュシンバル)
		@4  kick+cymbal(バスドラム+シンバル)
		@5  ac.tam(アコースティック・タム)
		@6  e.tam(エレクトリック・タム)
		@7  snare2(スネアドラム2)
		@8  o.hit(オーケストラヒット)
		@9  909kick(909バスドラム)
		@10 909snare(909スネアドラム)
		@11 808openhihat(808オープンハイハット)
		@12 timbal(ティンバレス)
		@13 hand clap(ハンドクラップ)
		@14 timpani(ティンパニー)

	ユーザーが独自のADPCM(サンプリング)データを変換してADPCMデータファイル
	として使用することが可能です。
	あらかじめ、テキストファイルにまとめる対象となるファイル名を記述
	したものを保存しておきます。たとえば、「pcmlist.txt」というファイルに

		voice1.wav
		voice2.wav
		voice3.wav

	という3行を記述して、mucom88winのメニュー(F1)からツール(Tool)->
	「PCMデータファイルを作成します」下にある「ファイルリストを指定」
	ボタンから、「pcmlist.txt」を指定することで、自動的にADPCMデータ
	ファイルが作成されます。
	作成されるファイル名は、デフォルトで「mypcm.bin」となっていますが、
	ダイアログで変更することが可能です。

	ファイルリストを記述したテキストファイルと同じフォルダに、実際の
	ADPCMファイルが保存されている必要があります。
	ここで使用するWAVファイルは、16bitモノラルのPCMデータである
	必要があります。サンプリング周波数は、ADPCM変換時に16KHzに補正されます。
	(WAV形式以外の拡張子を持つファイルがリストにある場合は、ADPCM形式の
	バイナリファイルとして認識されますので、PC-8801で作成されたADPCMの
	バイナリファイルを指定することも可能です。)

	ユーザーがMUCOM88(MUSIC LALF)で独自に使用していたADPCM(サンプリング)
	データを丸ごと変換して使用することも可能です。
	まず、PC-8801上で使用していたディスク上のファイルをすべてWindows上に
	持ってくる必要があります。n88 DISK BASIC形式のディスク(D88形式)から
	ファイルを取り出すためのツールとして、ＡＫＡＴＴＡ氏が作成したd88edjを
	使用して検証しています。

	d88edjは、以下のサイトにて配布されています。

	d88edj   -D88 Editor for Java-
	http://www.cug.net/~akatta/

	MUCOM88では、ADPCMのデータとして「DATA」というバイナリファイル、
	「VOICE._1」「VOICE._2」などのデータファイルを使用しています。
	これらを1つのフォルダにすべて展開して、mucom88winのメニュー(F1)から
	ツール(Tool)->「PCMデータファイルを作成します」下にある「DATAファイルフォルダを指定」ボタンを
	押してフォルダを指定することで、PCMデータファイルが作成されます。

	標準的に使用されるPCMデータファイルは、mucom88winのメニュー(F1)から
	オプション(Option)->「標準ADPCMファイル」で指定されている項目を
	修正することで変更が可能です。

	また、MMLの中に、タグとして「#pcm」で始まる行を追加することで、
	明示的にADPCMデータファイルを指定することができます。

		#pcm mucompcm.bin

	上の例では、MMLが「mucompcm.bin」のADPCMデータファイルを使用することを
	示しています。これにより、演奏時に自動的に該当するPCMデータファイルが
	読み込まれます。また、バイナリデータファイル(.mub)を出力した際に、
	ADPCMデータも内包した形で出力されます。

	ユーザーが独自に作成したADPCMデータファイルは、MMLデータファイルと
	同じフォルダに配置するようにしてください。


・リズム音源について

	MUCOM88 Windowsと同じフォルダに、以下のファイルがあった場合は、
	リズム音源用のサンプルファイルとして使用されます。
	リズム音源部を使用する場合は、別途ファイルをご用意頂く必要があります。

	2608_BD.WAV
	2608_HH.WAV
	2608_RIM.WAV
	2608_SD.WAV
	2608_TOM.WAV
	2608_TOP.WAV

	リズム音源用のサンプルファイルは、実際のボードからサンプリングして
	作成するなどの他に、サイトからダウンロードすることが可能です。
	https://sites.google.com/site/ym2608rhythm/


・実チップの使用について

	MUCOM88 Windowsでは、SCCI(Sound Chip Common Interface)を経由して
	実際のFM音源チップ(YM2608)による演奏をサポートしています。
	同梱されているSCCIのシステムDLLは、以下のハードウェアに実チップ
	(YM2608)を搭載したものに対応しています。

	・SPFM FMの塔
	・SPFM Light
	・RE:Birth 
	・G.I.M.I.C
	・C86BOX

	実チップの使用については、最新のSCCI関連情報を参照ください。

	SCCI(Sound Chip Common Interface)
	http://www.pyonpyon.jp/~gasshi/fm/scci.html

	MUCOM88 WindowsからSCCIを使用する際は、メニュー→オプションで
	「SCCI使用」のチェックをONにして、ツールを再起動してください。
	(SCCIオプションは、ツールを再度起動した際に有効になります)

	実際にに使用する際には、PCにハードウェアを接続した状態で、最初に
	SCCIの設定を行っておく必要があります。
	メニュー→オプション「SCCI設定」ボタンから、SCCIの設定メニュー
	を起動することができます。(scciconfig.exeからも起動できます)

	SCCI使用時は、Windows上でのFM音源再生は行わず、外部のチップのみで
	再生を行います。


・コマンドライン版について

	コマンドラインから「mucom88.exe」を呼び出して使用することが可能です。
	以下の書式でオプションを指定することができます。

	mucom88 [options] [filename]

	オプション

	       -p [filename] 	読み込まれるPCMファイルを指定する
	       -v [filename]	読み込まれる音色ファイルを指定する
	       -o [filename]	出力されるバイナリファイル名を指定する
	       -c [filename]	MMLファイルをバイナリファイルに変換する
	       -i [filename]	MMLファイルの概要を出力する
	       -e           	MUCOM88システムファイルを外部から読み込む
	       -s           	SCCIを経由して実チップでの演奏を行う
	       -k           	PCMファイルの読み込みをスキップする


・HSPプラグインについて

	同梱されている、hspmucom.dllはスクリプト言語HSP(HotSoupProcessor)から
	呼び出して使用することが可能なプラグインになっています。
	MUCOM88 Windowsアプリケーションも、HSPにより記述されています。
	hspluginフォルダにスクリプトのソース及びプラグインドキュメントが
	含まれています。
	HSPについての詳細は、以下を参照してください。

	Hot Soup Processor公式HP
	https://hsp.tv/


・OPEN MUCOM88プロジェクトについて

	MUCOM88 Windowsは、OPEN MUCOM88プロジェクトの一部として公開されています。

	MUCOM88は、もともと1987年・古代祐三氏によって開発・発表された
	NEC PC-8801プラットフォーム用のMML形式による音楽作成ツール、及び
	再生用のプログラム(ドライバー)環境です。

	OPEN MUCOM88プロジェクトは、オリジナルのMUCOM88ソースコードを公開する
	ことで、幅広く活用・継承することを目的としています。
	無償で公開されたソースコードや資産などは、オープンなライセンスにより
	自由に活用することが可能です。
	ライセンスの詳細は、「ライセンスおよび連絡先」項目及び「license.txt」
	にまとめられています。


・ライセンスおよび連絡先

	MUCOM88 Windowsは、以下のサイトにて1次配布されています。

	MUCOM88 Windows
	https://onitama.tv/mucom88/

	OPEN MUCOM88 Windows github repository
	https://github.com/onitama/mucom88


	MUCOM88 Windowsは、以下のライブラリ及びソースコード・データにより作成されています。

	・Portable Z80 emulation作者 Yasuo Kuwahara氏
	  http://www.geocities.jp/kwhr0/
	・fmgen作者 cisc氏
	  http://www.retropc.net/cisc/
	・MUCOM88作者 古代祐三氏
	  https://twitter.com/yuzokoshiro
	・HSPMUCOM作者 おにたま(ONION software)
	  https://www.onionsoft.net/
	・adpcm converter/SCCI/FmToneEditor/mucom88DatToTxt作者
	  がし３(gasshi)氏
	  http://www.pyonpyon.jp/~gasshi/fm/

	作成にあたり、ご協力頂いた和田誠(エインシャント)様、
	WING☆様、OXYGEN様、がし３(gasshi)様、@MUCOM88様、UME-3様そして
	オリジナルのPC-8801版を作成した古代祐三様、本当にありがとうございました。

	MUCOM88 Windows及びソースコードは、クリエイティブコモンズで規定された
	CC BY-NC-SA 4.0ライセンスで公開されています。
	https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ja

	無償(非営利)である限りは自由に紹介、複製、再配布が可能です。
	その際には必ずドキュメントとライセンス表記(license.txt)も含めるように
	してください。

	サンプル楽曲(sampl1.muc、sampl2.muc、sampl3.muc)及び付属するデータ
	(mucompcm.bin、voice.dat)は株式会社エインシャントの古代祐三氏により
	提供されています。
	https://www.ancient.co.jp/yuzo.html

	古代祐三氏のサンプル楽曲については、著作権のライセンスを必ず明示する
	ようお願い致します。

	ライセンス表記の例:
	「楽曲名(またはファイル名) / Copyright(C) by Yuzo Koshiro」


	MUCOM88 Windowsは、おにたま(onion software)が中心となり作成されています。

	ONION software Homepage
	https://www.onionsoft.net/

	ユーザーがMUCOM88を使って作成したオリジナルの楽曲、MMLファイルの権利は
	それを作成したユーザーに属します。
	onion softwareは本プログラムによって生じた、いかなる損害についても
	保証いたしません。自己の責任の範囲で使用してください。
	また、付属のHSPスクリプトも自由に改変、公開していただいて構いません。


	fmgenソースコードに関する配布規定は、作者であるcisc氏のライセンスに
	従ってください。fmgenソースコードの配布規定は以下の通りです。

	・fmgenソースコードは作者(cisc@retropc.net) が著作権を所有しています。

	・本ソースコードはあるがままに提供されるものであり，
	  暗黙及び明示的な保証を一切含みません．

	・本ソースコードを利用したこと，利用しなかったこと，
	  利用できなかったことに関して生じたあるいは生じると予測される
	  損害について，作者は一切責任を負いません．

	・本ソースコードは，以下の制限を満たす限り自由に改変・組み込み・
	  配布・利用することができます．

	  1. 本ソフトの由来(作者, 著作権)を明記すること.
	  2. 配布する際にはフリーソフトとすること．
	  3. 改変したソースコードを配布する際は改変内容を明示すること.
	  4. ソースコードを配布する際にはこのテキストを一切改変せずに
	     そのまま添付すること．

	・公開の際に作者への連絡を頂ければ幸いです．

	・商用ソフト(シェアウェア含む) に本ソースコードの一部，または
	  全部を組み込む際には，事前に作者の合意を得る必要があります．

	各ライブラリについての詳細は、それぞれのソースコード及びドキュメントを
	参照ください。
	有償・商用での配布については、別途作者までお問い合わせください。


-------------------------------------------------------------------------------
                                                HSP users manual / end of file 
-------------------------------------------------------------------------------
